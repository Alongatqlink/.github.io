<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VIP Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Select2 CSS + Select2 Bootstrap4 Theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap4-theme@1.5.2/dist/select2-bootstrap4.min.css">

  <style>
/* 1. 讓 Select2 外觀更像 .form-control (Bootstrap) */
.select2-container--bootstrap4 .select2-selection--single {
  display: flex !important;                /* 讓內部元素可用 align-items 垂直置中 */
  align-items: center !important;          /* 垂直置中 */
  height: calc(2.25rem + 2px) !important;  /* 與 .form-control 相同高度 */
  border: 1px solid #ced4da !important;
  border-radius: .25rem !important;
  background-color: #fff !important;
  padding: 0 !important;                  /* 移除預設 padding，改用內部調整 */
  line-height: 1.5 !important;
}

/* 2. 控制文字的內距、移除負 margin */
.select2-container--bootstrap4 .select2-selection--single .select2-selection__rendered {
  margin-top: 0 !important;               /* 移除預設的 -2px margin-top */
  margin-left: .75rem !important;         /* 與原生 .form-control placeholder 左內距類似 */
  margin-right: .75rem !important;        /* 給右側一點空間 */
  padding: 0 !important;                  /* 避免預設 padding 干擾 */
  line-height: 1.5 !important;
  color: #495057 !important;             /* 與 Bootstrap input 文字色相同 (可依需求) */
}

/* 3. Placeholder 文字色彩 (可選) */
.select2-container--bootstrap4 .select2-selection__placeholder {
  color: #6c757d !important;             /* 與原生 placeholder 相同 (Bootstrap) */
}
  </style>
</head>
<body>

<div class="form-container">
  <h1>VIP Registration</h1>
  <form onsubmit="handleSubmit(event)">
    <!-- Dealer Code (Select2) -->
    <div class="form-group">
      <label for="dealerCode">Dealer Code (required)</label>
      <select id="dealerCode" class="form-control" style="width: 100%;">
        <!-- 預設空白，讓 Select2 用 placeholder 顯示 -->
        <option value=""></option>
      </select>
    </div>

    <!-- Model -->
    <div class="form-group">
      <label for="model">Model (e.g. ABC-123)</label>
      <input type="text" class="form-control" id="model" placeholder="e.g. ABC-123">
    </div>

    <!-- Product Serial -->
    <div class="form-group">
      <label for="productSerial">Product Serial (required)</label>
      <input type="text" class="form-control" id="productSerial" placeholder="Enter product serial" required>
    </div>

    <!-- Customer Name -->
    <div class="form-group">
      <label for="consumerName">Customer Name</label>
      <input type="text" class="form-control" id="consumerName" placeholder="Enter your name">
    </div>

    <!-- Phone / WhatsApp Number -->
    <div class="form-group">
      <label for="phoneNumber">Phone / WhatsApp Number</label>
      <input type="text" class="form-control" id="phoneNumber" placeholder="e.g. +234XXXXXXXX">
    </div>

    <!-- Purchase Date -->
    <div class="form-group">
      <label for="purchaseDate">Purchase Date</label>
      <input type="date" class="form-control" id="purchaseDate" placeholder="yyyy/mm/dd">
    </div>

    <!-- State -->
    <div class="form-group">
      <label for="state">State</label>
      <select id="state" class="form-control" style="width: 100%;">
        <option value=""></option>
          <option value="">Select State</option>
          <option value="Abia">Abia</option>
          <option value="Adamawa">Adamawa</option>
          <option value="Akwa Ibom">Akwa Ibom</option>
          <option value="Anambra">Anambra</option>
          <option value="Bauchi">Bauchi</option>
          <option value="Bayelsa">Bayelsa</option>
          <option value="Benue">Benue</option>
          <option value="Borno">Borno</option>
          <option value="Cross River">Cross River</option>
          <option value="Delta">Delta</option>
          <option value="Ebonyi">Ebonyi</option>
          <option value="Edo">Edo</option>
          <option value="Ekiti">Ekiti</option>
          <option value="Enugu">Enugu</option>
          <option value="Gombe">Gombe</option>
          <option value="Imo">Imo</option>
          <option value="Jigawa">Jigawa</option>
          <option value="Kaduna">Kaduna</option>
          <option value="Kano">Kano</option>
          <option value="Katsina">Katsina</option>
          <option value="Kebbi">Kebbi</option>
          <option value="Kogi">Kogi</option>
          <option value="Kwara">Kwara</option>
          <option value="Lagos">Lagos</option>
          <option value="Nasarawa">Nasarawa</option>
          <option value="Niger">Niger</option>
          <option value="Ogun">Ogun</option>
          <option value="Ondo">Ondo</option>
          <option value="Osun">Osun</option>
          <option value="Oyo">Oyo</option>
          <option value="Plateau">Plateau</option>
          <option value="Rivers">Rivers</option>
          <option value="Sokoto">Sokoto</option>
          <option value="Taraba">Taraba</option>
          <option value="Yobe">Yobe</option>
          <option value="Zamfara">Zamfara</option>
          <option value="FCT Abuja">FCT Abuja</option>
          <!-- 根據實際需求新增其他州 -->
        </select>
      </div>
    
     <!-- LGA 下拉選單，初始為空 -->
    <div class="form-group">
      <label for="lga">LGA</label>
      <select id="lga" class="form-control">
        <option value="">Select LGA</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Submit Registration</button>
  </form>
</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Select2 JS -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
  // 1. 定義每個州對應的 LGA (示範)
  const lgaByState = {
    "Abia": ["Aba North", "Aba South", "Arochukwu", "Bende", "Ikwuano", "Isiala-Ngwa North", "Isiala-Ngwa South", "Isuikwato", "Ngwa", "Obi Nwa", "Ohafia", "Osisioma", "Ugwunagbo", "Ukwa East", "Ukwa West", "Umu-Neochi", "Umuahia North", "Umuahia South"],
    "Adamawa": ["Demsa", "Fufore", "Ganaye", "Gireri", "Gombi", "Guyuk", "Hong", "Jada", "Lamurde", "Madagali", "Maiha", "Mayo-Belwa", "Michika", "Mubi North", "Mubi South", "Numan", "Shelleng", "Song", "Toungo", "Yola North", "Yola South"],
    "Akwa Ibom": ["Abak", "Eastern Obolo", "Eket", "Esit Eket", "Essien Udim", "Etim Ekpo", "Etinan", "Ibeno", "Ibesikpo Asutan", "Ibiono Ibom", "Ika", "Ikono", "Ikot Abasi", "Ikot Ekpene", "Ini", "Itu", "Mbo", "Mkpat Enin", "Nsit Atai", "Nsit Ibom", "Nsit Ubium", "Obot Akara", "Okobo", "Onna", "Oron", "Oruk Anam", "Udung Uko", "Ukanafun", "Uruan", "Urue-Offong/Oruko", "Uyo"],
    "Anambra": ["Aguata", "Anambra East", "Anambra West", "Anaocha", "Awka North", "Awka South", "Ayamelum", "Dunukofia", "Ekwusigo", "Idemili North", "Idemili south", "Ihiala", "Njikoka", "Nnewi North", "Nnewi South", "Ogbaru", "Onitsha North", "Onitsha South", "Orumba North", "Orumba South", "Oyi"],
    "Bauchi": ["Alkaleri", "Bauchi", "Bogoro", "Damban", "Darazo", "Dass", "Gamawa", "Ganjuwa", "Giade", "Itas/Gadau", "Jama'are", "Katagum", "Kirfi", "Misau", "Ningi", "Shira", "Tafawa-Balewa", "Toro", "Warji", "Zaki"],
    "Bayelsa": ["Brass", "Ekeremor", "Kolokuma/Opokuma", "Nembe", "Ogbia", "Sagbama", "Southern Jaw", "Yenegoa"],
    "Benue": ["Ado", "Agatu", "Apa", "Buruku", "Gboko", "Guma", "Gwer East", "Gwer West", "Katsina-Ala", "Konshisha", "Kwande", "Logo", "Makurdi", "Obi", "Ogbadibo", "Ohimini", "Oju", "Okpokwu", "Oturkpo", "Tarka", "Ukum", "Ushongo", "Vandeikya"],
    "Borno": ["Abadam", "Askira/Uba", "Bama", "Bayo", "Biu", "Chibok", "Damboa", "Dikwa", "Gubio", "Guzamala", "Gwoza", "Hawul", "Jere", "Kaga", "Kala/Balge", "Konduga", "Kukawa", "Kwaya Kusar", "Mafa", "Magumeri", "Maiduguri", "Marte", "Mobbar", "Monguno", "Ngala", "Nganzai", "Shani"],
    "Cross River": ["Abi", "Akamkpa", "Akpabuyo", "Bakassi", "Bekwara", "Biase", "Boki", "Calabar Municipality", "Calabar South", "Etung", "Ikom", "Obanliku", "Obudu", "Odubra", "Odukpani", "Ogoja", "Yala", "Yarkur"],
    "Delta": ["Aniocha", "Aniocha South", "Bomadi", "Burutu", "Ethiope East", "Ethiope West", "Ika North-East", "Ika South", "Isoko North", "Isoko south", "Ndokwa East", "Ndokwa West", "Okpe", "Oshimili", "Oshimili North", "Patani", "Sapele", "Udu", "Ughelli North", "Ughelli South", "Ukwani", "Uvwie", "Warri Central", "Warri North", "Warri South"],
    "Ebonyi": ["Abakaliki", "Afikpo", "Ebonyi", "Edda", "Ezza", "Ezza Central", "Ezza South", "Ishielu", "Ivo", "lkwo", "Ohaozara", "Ohaukwu", "Onicha"],
    "Edo": ["Central", "Egor", "Esan Central", "Esan North-East", "Esan South-East", "Esan West", "Etsako Central", "Etsako East", "Etsako West", "Igueben", "Ikpoba-Okha", "Oredo", "Orhionwon", "Ovia North-East", "Ovia South-East", "Ovia SouthWest", "Uhunmwonde", "Ukpoba"],
    "Ekiti": ["Ado Ekiti", "Efon", "Ekiti South-West", "Ekiti-East", "Ekiti-West", "Emure/Ise/Orun", "Gbonyin", "Ido/Osi", "Ijero", "Ikere", "Ikole", "Ilejemeje.", "Irepodun-Ifelodun", "Ise/Orun", "Moba", "Oye"],
    "Enugu": ["Aninri", "Enugu Eas", "Enugu North", "Enugu South", "Ezeagu", "Igbo-Ekiti", "Igbo-Eze South", "IgboEze North", "Isi-Uzo", "Nkanu", "Nkanu East", "Nkanu West", "Nsukka", "Oji-River", "Udenu.", "Udi Agwu", "Uzo-Uwani"],
    "FCT": ["Abaji", "Abuja Municipal", "Bwari", "Gwagwalada", "Kuje", "Kwali"],
    "Gombe": ["Akko", "Balanga", "Billiri", "Dukku", "Funakaye", "Gombe", "Kaltungo", "Kwami", "Nafada/Bajoga", "Shomgom", "Yamaltu/Delta."],
    "Imo": ["Aboh-Mbaise", "Ahiazu-Mbaise", "Ehime-Mbano", "Ezinihitte", "Ideato North", "Ideato South", "Ihitte/Uboma", "Ikeduru", "Isiala Mbano", "Isu", "Mbaitoli", "Ngor-Okpala", "Njaba", "Nkwerre", "Nwangele", "Obowo", "Oguta", "Ohaji/Egbema", "Okigwe", "Orlu", "Orsu", "Oru East", "Oru West", "Owerri North", "Owerri West", "Owerri-Municipal"],
    "Jigawa": ["Auyo", "Babura", "Biriniwa", "Birni Kudu", "Buji", "Dutse", "Gagarawa", "Garki", "Gumel", "Guri", "Gwaram", "Gwiwa", "Hadejia", "Jahun", "Kafin Hausa", "Kaugama Kazaure", "Kiri Kasamma", "Kiyawa", "Maigatari", "Malam Madori", "Miga", "Ringim", "Roni", "Sule-Tankarkar", "Taura", "Yankwashi"],
    "Kaduna": ["Birni-Gwari", "Chikun", "Giwa", "Igabi", "Ikara", "jaba", "Jema'a", "Kachia", "Kaduna North", "Kaduna South", "Kagarko", "Kajuru", "Kaura", "Kauru", "Kubau", "Kudan", "Lere", "Makarfi", "Sabon-Gari", "Sanga", "Soba", "Zango-Kataf", "Zaria"],
    "Kano": ["Ajingi", "Albasu", "Bagwai", "Bebeji", "Bichi", "Bunkure", "Dala", "Dambatta", "Dawakin Kudu", "Dawakin Tofa", "Doguwa", "Fagge", "Gabasawa", "Garko", "Garum", "Gaya", "Gezawa", "Ghari", "Gwale", "Gwarzo", "Kabo", "Kano Municipal", "Karaye", "Kibiya", "Kiru", "kumbotso", "Kunchi", "Kura", "Madobi", "Makoda", "Mallam", "Minjibir", "Nasarawa", "Rano", "Rimin Gado", "Rogo", "Shanono", "Sumaila", "Takali", "Tarauni", "Tofa", "Tsanyawa", "Tudun Wada", "Ungogo", "Warawa", "Wudil"],
    "Katsina": ["Bakori", "Batagarawa", "Batsari", "Baure", "Bindawa", "Charanchi", "Dan Musa", "Dandume", "Danja", "Daura", "Dutsi", "Dutsin-Ma", "Faskari", "Funtua", "Ingawa", "Jibia", "Kafur", "Kaita", "Kankara", "Kankia", "Katsina", "Kurfi", "Kusada", "Mai'Adua", "Malumfashi", "Mani", "Mashi", "Matazuu", "Musawa", "Rimi", "Sabuwa", "Safana", "Sandamu", "Zango"],
    "Kebbi": ["Aleiro", "Arewa-Dandi", "Argungu", "Augie", "Bagudo", "Birnin Kebbi", "Bunza", "Dandi", "Fakai", "Gwandu", "Jega", "Kalgo", "Koko/Besse", "Maiyama", "Ngaski", "Sakaba", "Shanga", "Suru", "Wasagu/Danko", "Yauri", "Zuru"],
    "Kogi": ["Adavi", "Ajaokuta", "Ankpa", "Bassa", "Dekina", "Ibaji", "Idah", "Igalamela-Odolu", "Ijumu", "Kabba/Bunu", "Kogi", "Lokoja", "Mopa-Muro", "Ofu", "Ogori/Mangongo", "Okehi", "Okene", "Olamabolo", "Omala", "Yagba East", "Yagba West"],
    "Kwara": ["Asa", "Baruten", "Edu", "Ekiti", "Ifelodun", "Ilorin East", "Ilorin West", "Irepodun", "Isin", "Kaiama", "Moro", "Offa", "Oke-Ero", "Oyun", "Pategi"],
    "Lagos": ["Agege", "Ajeromi-Ifelodun", "Alimosho", "Amuwo-Odofin", "Apapa", "Badagry", "Epe", "Eti-Osa", "Ibeju/Lekki", "Ifako-Ijaye", "Ikeja", "Ikorodu", "Kosofe", "Lagos Island", "Lagos Mainland", "Mushin", "Ojo", "Oshodi-Isolo", "Shomolu", "Surulere"],
    "Nasarawa": ["Akwanga", "Awe", "Doma", "Karu", "Keana", "Keffi", "Kokona", "Lafia", "Nasarawa", "Nasarawa-Eggon", "Obi", "Toto", "Wamba"],
    "Niger": ["Agaie", "Agwara", "Bida", "Borgu", "Bosso", "Chanchaga", "Edati", "Gbako", "Gurara", "Katcha", "Kontagora", "Lapai", "Lavun", "Magama", "Mariga", "Mashegu", "Mokwa", "Muya", "Pailoro", "Rafi", "Rijau", "Shiroro", "Suleja", "Tafa", "Wushishi"],
    "Ogun": ["Abeokuta North", "Abeokuta South", "Ado-Odo/Ota", "Ewekoro", "Ifo", "Ijebu East", "Ijebu North", "Ijebu North East", "Ijebu Ode", "Ikenne", "Imeko-Afon", "Ipokia", "Obafemi-Owode", "Odeda", "Odogbolu", "Ogun Waterside", "Remo North", "Shagamu", "Yewa North", "Yewa South"],
    "Ondo": ["Akoko North East", "Akoko North West", "Akoko South East", "Akoko South West", "Akure North", "Akure South", "Ese-Odo", "Idanre", "Ifedore", "Ilaje", "Ile-Oluji", "Irele", "Odigbo", "Okeigbo", "Okitipupa", "Ondo East", "Ondo West", "Ose", "Owo"],
    "Osun": ["Aiyedade", "Aiyedire", "Atakumosa East", "Atakumosa West", "Boluwaduro", "Boripe", "Ede North", "Ede South", "Egbedore", "Ejigbo", "Ife Central", "Ife East", "Ife North", "Ife South", "Ifedayo", "Ifelodun", "Ila", "Ilesha East", "Ilesha West", "Irepodun", "Irewole", "Isokan", "Iwo", "Obokun", "Odo-Otin", "Ola-Oluwa", "Olorunda", "Oriade", "Orolu", "Osogbo"],
    "Oyo": ["Afijio", "Akinyele", "Atiba", "Atisbo", "Egbeda", "Ibadan Central", "Ibadan North", "Ibadan North West", "Ibadan South East", "Ibadan South West", "Ibarapa Central", "Ibarapa East", "Ibarapa North", "Ido", "Irepo", "Iseyin", "Itesiwaju", "Iwajowa", "Kajola", "Lagelu Ogbomosho North", "Ogbomosho South", "Ogo Oluwa", "Olorunsogo", "Oluyole", "Ona-Ara", "Orelope", "Ori Ire", "Oyo East", "Oyo West", "Saki East", "Saki West", "Surulere"],
    "Plateau": ["Barikin Ladi", "Bassa", "Bokkos", "Jos East", "Jos North", "Jos South", "Kanam", "Kanke", "Langtang North", "Langtang South", "Mangu", "Mikang", "Pankshin", "Qua'an Pan", "Riyom", "Shendam", "Wase"],
    "Rivers": ["Abua/Odual", "Ahoada East", "Ahoada West", "Akuku Toru", "Andoni", "Asari-Toru", "Bonny", "Degema", "Eleme", "Emohua", "Etche", "Gokana", "Ikwerre", "Khana", "Obio/Akpor", "Ogba/Egbema/Ndoni", "Ogu/Bolo", "Okrika", "Omumma", "Opobo/Nkoro", "Oyigbo", "Port-Harcourt", "Tai"],
    "Sokoto": ["Binji", "Bodinga", "Dange-shnsi", "Gada", "Gawabawa", "Goronyo", "Gudu", "Illela", "Isa", "kebbe", "Kware", "Rabah", "Sabon birni", "Shagari", "Silame", "Sokoto North", "Sokoto South", "Tambuwal", "Tqngaza", "Tureta", "Wamako", "Wurno", "Yabo"],
    "Taraba": ["Ardo-kola", "Bali", "Cassol", "Donga", "Gashaka", "Ibi", "Jalingo", "Karin-Lamido", "Kurmi", "Lau", "Sardauna", "Takum", "Ussa", "Wukari", "Yorro", "Zing"],
    "Yobe": ["Bade", "Bursari", "Damaturu", "Fika", "Fune", "Geidam", "Gujba", "Gulani", "Jakusko", "Karasuwa", "Karawa", "Machina", "Nangere", "Nguru Potiskum", "Tarmua", "Yunusari", "Yusufari"],
    "Zamfara": ["Anka", "Bakura", "Birnin Magaji", "Bukkuyum", "Bungudu", "Gummi", "Gusau", "Kaura-Namoda", "Maradun", "Maru", "Namoda", "Shinkafi", "Talata Mafara", "Tsafe", "Zurmi"],
    // ... 其他州 ...
  };

  $(document).ready(function() {
    // 2. 初始化 State 下拉 (Select2)
    $("#state").select2({
      placeholder: "Type to search State...",
      theme: "bootstrap4"
    });

    // 3. 初始化 LGA 下拉 (Select2)
    $("#lga").select2({
      placeholder: "Type to search LGA...",
      theme: "bootstrap4"
    });

    // 4. 監聽 State 改變事件
    $("#state").on("change", function() {
      const selectedState = $(this).val();
      const $lgaSelect = $("#lga");

      // 清空舊 LGA 選項
      $lgaSelect.html('<option value=""></option>');

      // 若該州有 LGA，動態加入
      if (selectedState && lgaByState[selectedState]) {
        lgaByState[selectedState].forEach(function(lga) {
          $lgaSelect.append(new Option(lga, lga));
        });
      }

      // 重新初始化 LGA 下拉 (Select2)
      $lgaSelect.select2({
        placeholder: "Type to search LGA...",
        theme: "bootstrap4"
      });
    });
  });

  // 5. 提交表單
  function handleSubmit(e) {
    e.preventDefault();
    const state = $("#state").val();
    const lga   = $("#lga").val();
    alert("Selected State: " + state + "\nSelected LGA: " + lga);
    // 這裡可送到後端
  }
</script>

  <!-- jQuery (務必在 Select2 JS 之前載入) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Select2 JS -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
  // 定義 10 個假 Dealer Code
  var dealerCodes = [
    "DealerABC",
    "DealerXYZ",
    "Dealer101",
    "Dealer202",
    "Dealer305",
    "Dealer007",
    "Dealer888",
    "Dealer555",
    "Dealer999",
    "Dealer111"
  ];

 $(document).ready(function() {
    // 將 Dealer Code 加入下拉
    var $select = $("#dealerCode");
    dealerCodes.forEach(function(code) {
      $select.append(new Option(code, code));
    });

    // 初始化 Select2
    $select.select2({
      placeholder: "e.g. DealerABC",
      theme: "bootstrap4"
    });

    // 當下拉展開時，動態給搜尋框加上提示
    $select.on('select2:open', function() {
      // 找到下拉展開後的搜尋框
      $('.select2-search__field').attr('placeholder', 'Type here to search Dealer Code...');
    });
  });

  function handleSubmit(event) {
    event.preventDefault();
    var selectedDealer = $("#dealerCode").val();
    var productSerial = $("#productSerial").val();
    alert("Dealer: " + selectedDealer + "\nProduct Serial: " + productSerial);
  }
</script>

  <script>
    // 簡單前端驗證：檢查輸入值中是否含有非法字元
    function isInvalidInput(value) {
      // 此範例只允許英數字、空白、及 -_,.() 等常見符號，你可依需求調整
      const pattern = /^[a-zA-Z0-9\s\-\_,.()\/]*$/;
      return !pattern.test(value);
    }

    function handleSubmit(e) {
      e.preventDefault(); // 阻止預設表單送出

      // 取得表單各欄位值
      const dealerCode    = document.getElementById('dealerCode').value.trim();
      const model         = document.getElementById('model').value.trim();
      const productSerial = document.getElementById('productSerial').value.trim();
      const consumerName  = document.getElementById('consumerName').value.trim();
      const phoneNumber   = document.getElementById('phoneNumber').value.trim();
      const purchaseDate  = document.getElementById('purchaseDate').value.trim();
      const city          = document.getElementById('city').value.trim();
      const state         = document.getElementById('state').value.trim();

      // 基本檢查：必填欄位
      if (!dealerCode || !productSerial) {
        document.getElementById('result').innerText = "Dealer Code and Product Serial are required.";
        return;
      }

      // 前端簡單非法字元檢查 (可視需求擴充)
      if (isInvalidInput(dealerCode) || isInvalidInput(productSerial) ||
          isInvalidInput(model) || isInvalidInput(consumerName) ||
          isInvalidInput(phoneNumber) || isInvalidInput(city) || isInvalidInput(state)) {
        document.getElementById('result').innerText = "Invalid characters detected.";
        return;
      }

      // 使用 URLSearchParams 將資料以表單格式送出 (application/x-www-form-urlencoded)
      const formData = new URLSearchParams();
      formData.append('dealerCode', dealerCode);
      formData.append('model', model);
      formData.append('productSerial', productSerial);
      formData.append('consumerName', consumerName);
      formData.append('phoneNumber', phoneNumber);
      formData.append('purchaseDate', purchaseDate);
      formData.append('city', city);
      formData.append('state', state);

      // 呼叫後端 Apps Script Web App (請將 URL 替換為你的部署 exec URL)
      fetch('https://script.google.com/macros/s/AKfycbzECGqAyJ7Gf88Tgw1DpG4C9mW1qFQCq0OtPmmx1RGS-_esSBE8WOmwed3-Fc5kDdPH/exec', {
        method: 'POST',
        body: formData
      })
      .then(response => response.text())
      .then(text => {
        let data;
        try {
          data = JSON.parse(text);
        } catch (err) {
          document.getElementById('result').innerText = "Response parse error.";
          return;
        }
        if (data.result === "success") {
          document.getElementById('result').innerText = "Registration Successful!";
          document.getElementById('result').className = "mt-3 text-success";
        } else {
          document.getElementById('result').innerText = "Failed: " + (data.error || "Unknown error");
          document.getElementById('result').className = "mt-3 text-danger";
        }
      })
      .catch(error => {
        console.error(error);
        document.getElementById('result').innerText = "Request failed. Please try again.";
      });
    }
  </script>
</body>
</html>
